<?php
global $pdo;
require_once 'db.php';

// Список названий мероприятий
$titles = [
    "Игровой вечер в кафе", "Лекция по программированию", "Startup meetup", "Турнир по настольному теннису",
    "Велопрогулка по паркам", "Кулинарный мастер-класс", "Фестиваль музыки", "Бесплатная йога на свежем воздухе",
    "Встреча клуба книголюбов", "Киновечер под открытым небом", "IT-хакатон", "Фестиваль комиксов",
    "Воркшоп по фотографии", "Караоке битва", "Турнир по настольным играм", "Семинар по психологии",
    "Уроки сальсы", "Выставка искусства", "Брейн-ринг", "Наставничество для студентов",
    "Бизнес-завтрак", "Тренировка по баскетболу", "Вечер настольных RPG", "Открытые дебаты",
    "Мастер-класс по рисованию", "Тренировка по кроссфиту", "Семинар по маркетингу",
    "Фестиваль уличной еды", "Курс по английскому языку", "Квиз вечер", "Курс по 3D моделированию",
    "Startup Pitch Night", "Клуб любителей аниме", "Соревнования по шахматам", "Кулинарный батл",
    "Игра мафия", "Спортивная зарядка", "Мастер-класс по гитаре", "Воркшоп по программированию",
    "Кино-дискуссия", "Курс по веб-разработке", "Лекция по астрономии", "Настольные гонки",
    "Наставничество для стартаперов", "Семейный квест", "Йога в парке", "Дискуссионный клуб",
    "Вечер настольных стратегий", "Воркшоп по мобильной разработке"
];

// Категории (по кругу)
$categories = ["Настольные игры", "IT", "Прогулки", "Культура", "Спорт"];

// Координаты Ставрополя (разброс)
$lat_min = 45.010;
$lat_max = 45.060;
$lon_min = 41.950;
$lon_max = 42.000;

for ($i = 0; $i < 50; $i++) {

    $title = isset($titles[$i]) ? $titles[$i] : "Мероприятие " . ($i+1);
    $description = "Описание мероприятия: " . $title;
    $category = $categories[$i % count($categories)];

    // Случайные координаты в рамках города
    $latitude = round(mt_rand($lat_min * 1000000, $lat_max * 1000000) / 1000000, 6);
    $longitude = round(mt_rand($lon_min * 1000000, $lon_max * 1000000) / 1000000, 6);

    // Дата мероприятия — в будущем
    $event_date = date('Y-m-d H:i:s', strtotime("+".(2+$i)." days"));

    $stmt = $pdo->prepare("
        INSERT INTO events (title, description, category, event_date, latitude, longitude, city, organizer_id, max_participants, status, created_at)
        VALUES (?, ?, ?, ?, ?, ?, 'Ставрополь', 1, ?, 'Открыто', NOW())
    ");
    $stmt->execute([
        $title,
        $description,
        $category,
        $event_date,
        $latitude,
        $longitude,
        rand(5, 30)
    ]);
}
